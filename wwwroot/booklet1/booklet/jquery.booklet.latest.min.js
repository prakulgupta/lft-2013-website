(function(n){function t(t,i){var u=t,r=i,hr=!1,it=!1,dt=!1,hi=!1,ci=!1,ct=!1,gt={empty:'<div class="b-page-empty" title=""><\/div>',blank:'<div class="b-page-blank" title=""><\/div>',sF:'<div class="b-shadow-f"><\/div>',sB:'<div class="b-shadow-b"><\/div>'},v={leftToRight:"LTR",rightToLeft:"RTL"},h={},f={},lt,nu,w,o=[],tu="",cr="/page/",l,s,b,di,at,ur,ft,li,vt,a,ni,p,c,k,ou,ht,gi,bu,ai,su,iu,et,ti,rt,yt,ot,ii,ku,du,pt,lr,hu,fr,vi,yi,ri,ui,d,g,nt,ar,vr,pi,fi,st,wt,yr,pr,nr,wi,bt,er,wr,ru,cu,uu,lu,e,br,tr,tt,fu,y={create:"bookletcreate",start:"bookletstart",change:"bookletchange",add:"bookletadd",remove:"bookletremove"},ut,gu=function(n,t,i){var r="",u="",f;return n.attr("rel")&&(r=n.attr("rel")),n.attr("title")&&(u=n.attr("title")),n.hasClass("b-page-empty")?n.wrap('<div class="b-page"><div class="b-wrap"><\/div><\/div>'):i.closed&&i.covers&&(t==1||t==i.pageTotal-2)?n.wrap('<div class="b-page"><div class="b-wrap b-page-cover"><\/div><\/div>'):t%2!=0?n.wrap('<div class="b-page"><div class="b-wrap b-wrap-right"><\/div><\/div>'):n.wrap('<div class="b-page"><div class="b-wrap b-wrap-left"><\/div><\/div>'),f=n.parents(".b-page").addClass("b-page-"+t),i.pageNumbers&&!n.hasClass("b-page-empty")&&(!i.closed||i.closed&&!i.covers||i.closed&&i.covers&&t!=1&&t!=i.pageTotal-2)&&(i.direction==v.leftToRight&&li++,n.parent().append('<div class="b-counter">'+li+"<\/div>"),i.direction==v.rightToLeft&&li--),{index:t,contentNode:n[0],pageNode:f[0],chapter:r,title:u}},nf=function(){if(u.find(".b-load").children().unwrap(),u.addClass("booklet"),u.data("booklet",this),ft=u.children().length,r.currentIndex=0,kr(),rr(),ir(),bi(),ki(),hr=!0,ct=!1,ut={options:jQuery.extend({},r),index:r.currentIndex,pages:[o[r.currentIndex].contentNode,o[r.currentIndex+1].contentNode]},r.create)u.off(y.create+".booklet").on(y.create+".booklet",r.create);u.trigger(y.create,ut)},tf=function(){ct=!1,rr(),yu()},rf=function(){or()},uf=function(){or(),dr(),u.removeClass("booklet"),u.removeData("booklet"),hr=!1},kr=function(){o=[],u.children().length%2!=0&&(r.closed&&r.covers?u.children().last().before(gt.blank):u.children().last().after(gt.blank)),r.closed&&(n(gt.empty).attr({title:r.closedFrontTitle||"",rel:r.closedFrontChapter||""}).prependTo(u),u.children().last().attr({title:r.closedBackTitle||"",rel:r.closedBackChapter||""}),u.append(gt.empty)),r.pageTotal=u.children().length,li=0,r.direction==v.rightToLeft&&(li=r.pageTotal,r.closed&&(li-=2),r.covers&&(li-=2),n(u.children().get().reverse()).each(function(){n(this).appendTo(u)})),hr||(r.direction==v.leftToRight?r.currentIndex=0:r.direction==v.rightToLeft&&(r.currentIndex=r.pageTotal-2),!isNaN(r.startingPage)&&r.startingPage<=r.pageTotal&&r.startingPage>0&&(r.startingPage%2!=0&&r.startingPage--,r.currentIndex=r.startingPage)),u.children().each(function(t){var i=new gu(n(this),t,r);o.push(i)})},ir=function(){ff(),au(),yu()},ff=function(){u.find(".b-page").removeClass("b-pN b-p0 b-p1 b-p2 b-p3 b-p4").hide(),r.currentIndex-2>=0&&(u.find(".b-page-"+(r.currentIndex-2)).addClass("b-pN").show(),u.find(".b-page-"+(r.currentIndex-1)).addClass("b-p0").show()),u.find(".b-page-"+r.currentIndex).addClass("b-p1").show(),u.find(".b-page-"+(r.currentIndex+1)).addClass("b-p2").show(),r.currentIndex+3<=r.pageTotal&&(u.find(".b-page-"+(r.currentIndex+2)).addClass("b-p3").show(),u.find(".b-page-"+(r.currentIndex+3)).addClass("b-p4").show()),vt=u.find(".b-pN"),a=u.find(".b-p0"),ni=u.find(".b-p1"),p=u.find(".b-p2"),c=u.find(".b-p3"),k=u.find(".b-p4"),ou=u.find(".b-pN .b-wrap"),ht=u.find(".b-p0 .b-wrap"),gi=u.find(".b-p1 .b-wrap"),bu=u.find(".b-p2 .b-wrap"),ai=u.find(".b-p3 .b-wrap"),su=u.find(".b-p4 .b-wrap"),iu=u.find(".b-wrap"),r.shadows&&(u.find(".b-shadow-f, .b-shadow-b").remove(),et=n(gt.sF).css(h.sF).appendTo(c),ti=n(gt.sB).appendTo(a).css(h.sB))},au=function(){u.find(".b-shadow-f, .b-shadow-b, .b-p0, .b-p3").css({filter:"",zoom:""}),u.find(".b-page").removeAttr("style"),iu.removeAttr("style"),iu.css(h.wrap),ht.css(h.p0wrap),ni.css(h.p1),p.css(h.p2),r.closed&&r.autoCenter&&r.currentIndex>=r.pageTotal-2&&p.hide(),vt.css(h.pN),a.css(h.p0),c.stop().css(h.p3),k.css(h.p4),r.closed&&r.autoCenter&&r.currentIndex==0&&(vt.css({left:0}),ni.css({left:br}),p.css({left:0}),c.css({left:e}),k.css({left:0})),r.closed&&r.autoCenter&&(r.currentIndex==0||r.currentIndex>=r.pageTotal-2)?(r.overlays&&ii.width("100%"),u.width(e)):(r.overlays&&ii.width("50%"),u.width(r.width)),u.find(".b-page").css({filter:"",zoom:""})},dr=function(){u.find(".b-wrap").unwrap(),u.find(".b-wrap").children().unwrap(),u.find(".b-counter, .b-page-blank, .b-page-empty, .b-shadow-f, .b-shadow-b").remove(),r.direction==v.rightToLeft&&n(u.children().get().reverse()).each(function(){n(this).appendTo(u)})},rr=function(t){var i=!1;if(t!=null&&typeof t!="undefined"&&(dr(),or(),ct=!1,r=n.extend({},r,t),i=!0,kr()),r.width?typeof r.width=="string"&&r.width.indexOf("px")!=-1?r.width=r.width.replace("px",""):typeof r.width=="string"&&r.width.indexOf("%")!=-1&&(ru=!0,cu=r.width,r.width=r.width.replace("%","")/100*parseFloat(u.parent().css("width"))):r.width=u.width(),r.height?typeof r.height=="string"&&r.height.indexOf("px")!=-1?r.height=r.height.replace("px",""):typeof r.height=="string"&&r.height.indexOf("%")!=-1&&(uu=!0,lu=r.height,r.height=r.height.replace("%","")/100*parseFloat(u.parent().css("height"))):r.height=u.height(),u.width(r.width),u.height(r.height),e=r.width/2,br="-"+e+"px",tr=e/2,tt=r.height,fu=r.speed/2,r.closed&&r.autoCenter&&(r.currentIndex==0?u.width(e):r.currentIndex>=r.pageTotal-2&&u.width(e)),r.shadows&&(r.shadowTopFwdWidth="-"+r.shadowTopFwdWidth+"px",r.shadowTopBackWidth="-"+r.shadowTopBackWidth+"px"),r.pageTotal=u.children(".b-page").length,r.name?document.title=r.name:r.name=document.title,vu(),hr&&ir(),r.menu&&n(r.menu).length>0){if(nt=n(r.menu),nt.hasClass("b-menu")||nt.addClass("b-menu"),r.pageSelector&&nt.find(".b-selector-page").length==0){for(pi=n('<div class="b-selector b-selector-page"><span class="b-current">'+(r.currentIndex+1)+" - "+(r.currentIndex+2)+"<\/span><\/div>").appendTo(nt),fi=n("<ul><\/ul>").appendTo(pi).empty().css("height","auto"),s=0;s<r.pageTotal;s+=2)if(b=s,st=b+1+"-"+(b+2),r.closed&&(b--,st=s==0?"1":s==r.pageTotal-2?r.pageTotal-2:b+1+"-"+(b+2),r.covers&&(b--,st=s==0?"":s==r.pageTotal-2?"":b+1+"-"+(b+2))),s==0&&pi.find(".b-current").text(st),wt=o[s].title,wt==""&&(wt=o[s+1].title),r.direction==v.rightToLeft&&(wt=o[Math.abs(s-r.pageTotal)-1].title,wt==""&&(wt=o[Math.abs(s-r.pageTotal)-2].title)),yr=n('<li><a href="#'+cr+(s+1)+'" id="selector-page-'+s+'"><span class="b-text">'+wt+'<\/span><span class="b-num">'+st+"<\/span><\/a><\/li>").appendTo(fi),!r.hash)yr.find("a").on("click.booklet",function(){return r.direction==v.rightToLeft?(pi.find(".b-current").text(n(this).find(".b-num").text()),kt(Math.abs(parseInt(n(this).attr("id").replace("selector-page-",""))-r.pageTotal)-2)):kt(parseInt(n(this).attr("id").replace("selector-page-",""))),!1});pr=fi.height(),fi.css({height:0,"padding-bottom":0});pi.on("mouseenter.booklet",function(){fi.stop().animate({height:pr,paddingBottom:10},500)}).on("mouseleave.booklet",function(){fi.stop().animate({height:0,paddingBottom:0},500)})}else r.pageSelector||(nt.find(".b-selector-page").remove(),pi=fi=st=wt=yr=pr=null);if(r.chapterSelector&&nt.find(".b-selector-chapter").length==0){for(nr=o[r.currentIndex].chapter,nr==""&&(nr=o[r.currentIndex+1].chapter),wi=n('<div class="b-selector b-selector-chapter"><span class="b-current">'+nr+"<\/span><\/div>").appendTo(nt),bt=n("<ul><\/ul>").appendTo(wi).empty().css("height","auto"),s=0;s<r.pageTotal;s+=1)if(o[s].chapter!=""&&typeof o[s].chapter!="undefined"&&(r.direction==v.rightToLeft?(b=s,b%2!=0&&b--,wi.find(".b-current").text(o[s].chapter),er=n('<li><a href="#'+cr+(b+1)+'" id="selector-page-'+b+'"><span class="b-text">'+o[s].chapter+"<\/span><\/a><\/li>").prependTo(bt)):er=n('<li><a href="#'+cr+(s+1)+'" id="selector-page-'+s+'"><span class="b-text">'+o[s].chapter+"<\/span><\/a><\/li>").appendTo(bt),!r.hash))er.find("a").on("click.booklet",function(){var t;return r.direction==v.rightToLeft?(wi.find(".b-current").text(n(this).find(".b-text").text()),t=Math.abs(parseInt(n(this).attr("id").replace("selector-page-",""))-r.pageTotal)-2):t=parseInt(n(this).attr("id").replace("selector-page-","")),t%2!=0&&(t-=1),kt(t),!1});wr=bt.height(),bt.css({height:0,"padding-bottom":0});wi.on("mouseenter.booklet",function(){bt.stop().animate({height:wr,paddingBottom:10},500)}).on("mouseleave.booklet",function(){bt.stop().animate({height:0,paddingBottom:0},500)})}else r.chapterSelector||(nt.find(".b-selector-chapter").remove(),nr=wi=bt=er=wr=null)}else nt=null,r.menu&&n(r.menu).removeClass("b-menu"),u.find(".b-selector").remove();if(ot=u.find(".b-controls"),ot.length==0&&(ot=n('<div class="b-controls"><\/div>').appendTo(u)),r.manual&&n.ui&&(r.overlays=!1),ri&&ri.off("click.booklet"),r.next&&n(r.next).length>0){ri=n(r.next);ri.on("click.booklet",function(n){n.preventDefault(),ei()})}else ri=null;if(ui&&ui.off("click.booklet"),r.prev&&n(r.prev).length>0){ui=n(r.prev);ui.on("click.booklet",function(n){n.preventDefault(),oi()})}else ui=null;ii=u.find(".b-overlay"),r.overlays&&ii.length==0?(du=n('<div class="b-overlay b-overlay-prev b-prev" title="'+r.previousControlTitle+'"><\/div>').appendTo(ot),ku=n('<div class="b-overlay b-overlay-next b-next" title="'+r.nextControlTitle+'"><\/div>').appendTo(ot),ii=u.find(".b-overlay"),n.browser.msie&&ii.css({background:"#fff",filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0) !important"})):r.overlays||(ii.remove(),ii=null),pt=u.find(".b-tab"),r.tabs&&pt.length==0?(hu=n('<div class="b-tab b-tab-prev b-prev" title="'+r.previousControlTitle+'">'+r.previousControlText+"<\/div>").appendTo(ot),lr=n('<div class="b-tab b-tab-next b-next" title="'+r.nextControlTitle+'">'+r.nextControlText+"<\/div>").appendTo(ot),pt=u.find(".b-tab")):r.tabs||(u.css({marginTop:0}),pt.remove(),pt=null),r.tabs&&pt.length>0&&(r.tabWidth&&pt.width(r.tabWidth),r.tabHeight&&pt.height(r.tabHeight),pt.css({top:"-"+lr.outerHeight()+"px"}),u.css({marginTop:lr.outerHeight()}),r.direction==v.rightToLeft&&(lr.html(r.previousControlText).attr("title",r.previousControlTitle),hu.html(r.nextControlText).attr("title",r.nextControlTitle))),fr=u.find(".b-arrow"),r.arrows&&fr.length==0?(yi=n('<div class="b-arrow b-arrow-prev b-prev" title="'+r.previousControlTitle+'"><div>'+r.previousControlText+"<\/div><\/div>").appendTo(ot),vi=n('<div class="b-arrow b-arrow-next b-next" title="'+r.nextControlTitle+'"><div>'+r.nextControlText+"<\/div><\/div>").appendTo(ot),fr=u.find(".b-arrow"),r.direction==v.rightToLeft&&(vi.html("<div>"+r.previousControlText+"<\/div>").attr("title",r.previousControlTitle),yi.html("<div>"+r.nextControlText+"<\/div>").attr("title",r.nextControlTitle))):r.arrows||(fr.remove(),fr=null),d=ot.find(".b-next"),g=ot.find(".b-prev"),d.off(".booklet"),g.off(".booklet");d.on("click.booklet",function(n){n.preventDefault(),ei()});g.on("click.booklet",function(n){n.preventDefault(),oi()});if(r.overlays&&r.hovers){d.on("mouseover.booklet",function(){sr(!0)}).on("mouseout.booklet",function(){si(!0)});g.on("mouseover.booklet",function(){sr(!1)}).on("mouseout.booklet",function(){si(!1)})}if(r.arrows)if(r.arrowsHide)if(n.support.opacity){d.on("mouseover.booklet",function(){vi.find("div").stop().fadeTo("fast",1)}).on("mouseout.booklet",function(){vi.find("div").stop().fadeTo("fast",0)});g.on("mouseover.booklet",function(){yi.find("div").stop().fadeTo("fast",1)}).on("mouseout.booklet",function(){yi.find("div").stop().fadeTo("fast",0)})}else{d.on("mouseover.booklet",function(){vi.find("div").show()}).on("mouseout.booklet",function(){vi.find("div").hide()});g.on("mouseover.booklet",function(){yi.find("div").show()}).on("mouseout.booklet",function(){yi.find("div").hide()})}else vi.find("div").show(),yi.find("div").show();n(document).on("keyup.booklet",function(n){n.keyCode==37&&r.keyboard&&!ct?oi():n.keyCode==39&&r.keyboard&&!ct&&ei()});clearInterval(di),di=null,r.hash&&(of(),clearInterval(di),di=setInterval(function(){sf()},250));n(window).on("resize.booklet",function(){(ru||uu)&&!ct&&ef()});if(r.auto&&r.delay){if(clearInterval(at),at=setInterval(function(){r.direction==v.leftToRight?ei():oi()},r.delay),dt=!0,r.pause&&n(r.pause).length>0){ar=n(r.pause);ar.off("click.booklet").on("click.booklet",function(n){n.preventDefault(),dt&&(clearInterval(at),dt=!1)})}if(r.play&&n(r.play).length>0){vr=n(r.play);vr.off("click.booklet").on("click.booklet",function(n){n.preventDefault(),dt||(clearInterval(at),at=setInterval(function(){r.direction==v.leftToRight?ei():oi()},r.delay),dt=!0)})}}else clearInterval(at),at=null,r.pause&&n(r.pause).length>0&&n(r.pause).off("click.booklet"),ar=null,r.play&&n(r.play).length>0&&n(r.play).off("click.booklet"),vr=null,dt=!1;i&&(ir(),bi(),ki())},vu=function(){h={wrap:{left:0,width:e-r.pagePadding*2-r.pageBorder*2,height:tt-r.pagePadding*2-r.pageBorder*2,padding:r.pagePadding},p0wrap:{right:0,left:"auto"},p1:{left:0,width:e,height:tt},p2:{left:e,width:e,opacity:1,height:tt},pN:{left:0,width:e,height:tt},p0:{left:0,width:0,height:tt},p3:{left:e*2,width:0,height:tt,paddingLeft:0},p4:{left:e,width:e,height:tt},sF:{right:0,width:e,height:tt},sB:{left:0,width:e,height:tt}},lt=10,nu=r.hoverWidth+lt,w=r.hoverWidth/2+lt,f={hover:{speed:r.hoverSpeed,size:r.hoverWidth,p2:{width:e-w},p3:{left:r.width-nu,width:w},p3closed:{left:e-r.hoverWidth,width:w},p3wrap:{left:lt},p2end:{width:e},p2closedEnd:{width:e,left:0},p3end:{left:r.width,width:0},p3closedEnd:{left:e,width:0},p3wrapEnd:{left:10},p1:{left:w,width:e-w},p1wrap:{left:"-"+w+"px"},p0:{left:w,width:w},p0wrap:{right:lt},p1end:{left:0,width:e},p1wrapEnd:{left:0},p0end:{left:0,width:0},p0wrapEnd:{right:0}},p2:{width:0},p2closed:{width:0,left:e},p4closed:{left:e},p3in:{left:tr,width:tr,paddingLeft:r.shadowBtmWidth},p3inDrag:{left:e/4,width:e*.75,paddingLeft:r.shadowBtmWidth},p3out:{left:0,width:e,paddingLeft:0},p3wrapIn:{left:r.shadowBtmWidth},p3wrapOut:{left:0},p1:{left:e,width:0},p1wrap:{left:br},p0:{left:e,width:e},p0in:{left:tr,width:tr},p0out:{left:e,width:e},p0outClosed:{left:0,width:e},p2back:{left:0},p0wrapDrag:{right:0},p0wrapIn:{right:r.shadowBtmWidth},p0wrapOut:{right:0}}},ef=function(){ru&&(r.width=cu.replace("%","")/100*parseFloat(u.parent().css("width")),u.width(r.width),e=r.width/2,br="-"+e+"px",tr=e/2),uu&&(r.height=lu.replace("%","")/100*parseFloat(u.parent().css("height")),u.height(r.height),tt=r.height),vu(),au()},bi=function(){(r.overlays||r.tabs||r.arrows)&&(n.support.opacity?(r.currentIndex>=2&&r.currentIndex!=0?g.fadeIn("fast").css("cursor",r.cursor):g.fadeOut("fast").css("cursor","default"),r.currentIndex<r.pageTotal-2?d.fadeIn("fast").css("cursor",r.cursor):d.fadeOut("fast").css("cursor","default")):(r.currentIndex>=2&&r.currentIndex!=0?g.show().css("cursor",r.cursor):g.hide().css("cursor","default"),r.currentIndex<r.pageTotal-2?d.show().css("cursor",r.cursor):d.hide().css("cursor","default")))},ki=function(){if(r.pageSelector){var t="";r.direction==v.rightToLeft?(t=Math.abs(r.currentIndex-r.pageTotal)-1+" - "+Math.abs(r.currentIndex-r.pageTotal),r.closed&&(t=r.currentIndex==r.pageTotal-2?"1":r.currentIndex==0?r.pageTotal-2:Math.abs(r.currentIndex-r.pageTotal)-2+" - "+(Math.abs(r.currentIndex-r.pageTotal)-1),r.covers&&(t=r.currentIndex==r.pageTotal-2?"":r.currentIndex==0?"":Math.abs(r.currentIndex-r.pageTotal)-3+" - "+(Math.abs(r.currentIndex-r.pageTotal)-2)))):(t=r.currentIndex+1+" - "+(r.currentIndex+2),r.closed&&(t=r.currentIndex==0?"1":r.currentIndex==r.pageTotal-2?r.pageTotal-2:r.currentIndex+"-"+(r.currentIndex+1),r.covers&&(t=r.currentIndex==0?"":r.currentIndex==r.pageTotal-2?"":r.currentIndex-1+"-"+r.currentIndex))),n(r.menu+" .b-selector-page .b-current").text(t)}r.chapterSelector&&(o[r.currentIndex].chapter!=""?n(r.menu+" .b-selector-chapter .b-current").text(o[r.currentIndex].chapter):o[r.currentIndex+1].chapter!=""&&n(r.menu+" .b-selector-chapter .b-current").text(o[r.currentIndex+1].chapter),r.direction==v.rightToLeft&&o[r.currentIndex+1].chapter!=""?n(r.menu+" .b-selector-chapter .b-current").text(o[r.currentIndex+1].chapter):o[r.currentIndex]!=""&&n(r.menu+" .b-selector-chapter .b-current").text(o[r.currentIndex].chapter))},yu=function(){var l,d,i,t,y,s,o,g,v,b,nt;if(hi=ci=rt=yt=!1,u.find(".b-page").draggable()&&u.find(".b-page").draggable("destroy").removeClass("b-grab b-grabbing"),r.manual&&n.ui){c.draggable({axis:"x",containment:[u.offset().left,0,p.offset().left+e-nu,tt],drag:function(f,h){rt=!0,c.removeClass("b-grab").addClass("b-grabbing"),l=h.originalPosition.left,d=h.position.left,i=l-d,t=i/l,y=t<.5?t:1-t,s=y*r.shadowBtmWidth*2+lt,s=i/l>=.5?s-=lt:s,r.shadows&&(et.css({right:"-"+r.shadowTopFwdWidth*y*2+"px"}),n.support.opacity?et.css({opacity:y*2}):et.css({right:"auto",left:.1*c.width()})),o=w+i/2,o=o>e?e:o,g=e-o,r.closed&&r.autoCenter&&(r.currentIndex==0?(v=.5+.5*t,o=w+w*t+i,o=o>e?e:o,g=e-o,p.css({left:e*t}),k.css({left:e*t}),u.width(r.width*v)):r.currentIndex==r.pageTotal-4?(v=1-t+.5*t,g=e-o,k.hide(),u.width(r.width*v)):u.width(r.width)),c.width(o),ai.css({left:s}),p.width(g)},stop:function(){si(!1),t>r.hoverThreshold?(r.shadows&&!n.support.opacity&&et.css({left:"auto",opacity:0}),ei(),c.removeClass("b-grab b-grabbing")):(rt=!1,c.removeClass("b-grabbing").addClass("b-grab"),et.animate({left:"auto",opacity:0},f.hover.speed,r.easing).css(h.sF),r.closed&&r.autoCenter&&(r.currentIndex==0?(p.animate({left:0},f.hover.speed,r.easing),k.animate({left:0},f.hover.speed,r.easing),u.animate({width:r.width*.5},f.hover.speed,r.easing)):u.animate({width:r.width},f.hover.speed,r.easing)))}}),a.draggable({axis:"x",containment:[u.offset().left+w,0,u.offset().left+r.width,tt],drag:function(f,h){yt=!0,a.removeClass("b-grab").addClass("b-grabbing"),l=h.originalPosition.left,d=h.position.left,i=d-l,t=i/(r.width-l),r.closed&&r.autoCenter&&r.currentIndex==2&&(t=i/(e-l)),t>1&&(t=1),y=t<.5?t:1-t,s=y*r.shadowBtmWidth*2+lt,s=i/l>=.5?s-=lt:s,r.shadows&&(n.support.opacity?ti.css({opacity:y*2}):ti.css({left:r.shadowTopBackWidth*y*2})),o=t*(e-w)+w+s,b=o-s,nt=-b,r.closed&&r.autoCenter&&(r.currentIndex==2?(v=1-t+.5*t,b=(1-t)*b,nt=-b-(r.width-r.width*v),vt.hide(),p.css({left:e*(1-t)}),k.css({left:e*(1-t)}),u.width(r.width*v)):r.currentIndex==r.pageTotal-2?(v=.5+.5*t,u.width(r.width*v)):u.width(r.width)),h.position.left=b,a.css({width:o}),ht.css({right:s}),ni.css({left:b,width:e-b}),gi.css({left:nt})},stop:function(){si(!0),t>r.hoverThreshold?(oi(),a.removeClass("b-grab b-grabbing")):(ti.animate({opacity:0},f.hover.speed,r.easing).css(h.sB),yt=!1,a.removeClass("b-grabbing").addClass("b-grab"),r.closed&&r.autoCenter&&(r.currentIndex==2?(p.animate({left:e},f.hover.speed*2,r.easing),k.animate({left:e},f.hover.speed*2,r.easing),u.animate({width:r.width},f.hover.speed*2,r.easing)):r.currentIndex==r.pageTotal-2&&u.animate({width:r.width*.5},f.hover.speed,r.easing)))}}),u.find(".b-page").off("click.booklet"),r.hoverClick&&(u.find(".b-pN, .b-p0").on("click.booklet",oi).css({cursor:"pointer"}),u.find(".b-p3, .b-p4").on("click.booklet",ei).css({cursor:"pointer"}));u.off("mousemove.booklet").on("mousemove.booklet",function(n){i=n.pageX-u.offset().left,i<f.hover.size?sr(!1):i>e-f.hover.size&&r.currentIndex==0&&r.autoCenter&&r.closed?sr(!0):i>f.hover.size&&i<=r.width-f.hover.size?(si(!1),si(!0)):i>r.width-f.hover.size&&sr(!0)}).off("mouseleave.booklet").on("mouseleave.booklet",function(){si(!1),si(!0)})}},of=function(){l=pu(),!isNaN(l)&&l<=r.pageTotal-1&&l>=0&&l!=""?(l%2!=0&&l--,r.currentIndex=l):eu(r.currentIndex+1,r),tu=l},sf=function(){l=pu(),!isNaN(l)&&l<=r.pageTotal-1&&l>=0&&l!=r.currentIndex&&l.toString()!=tu&&(l%2!=0&&l--,document.title=r.name+r.hashTitleText+(l+1),it||(kt(l),tu=l))},pu=function(){var t,n;return t=window.location.hash.split("/"),t.length>1?(n=parseInt(t[2])-1,r.direction==v.rightToLeft&&(n=Math.abs(n+1-r.pageTotal)),n):""},eu=function(n,t){t.hash&&(t.direction==v.rightToLeft&&(n=Math.abs(n-t.pageTotal)),window.location.hash=cr+n)},or=function(){r.menu&&(n(r.menu).removeClass("b-menu"),r.pageSelector&&(nt.find(".b-selector-page").remove(),pi=fi=st=wt=yr=pr=null),r.chapterSelector&&(nt.find(".b-selector-chapter").remove(),nr=wi=bt=er=wr=null)),nt=null,ri&&(ri.off("click.booklet"),ri=null),ui&&(ui.off("click.booklet"),ui=null),d&&(d.off(".booklet"),d=null),g&&(g.off(".booklet"),g=null),u.find(".b-selector, .b-controls").remove(),ct=!0,clearInterval(di),di=null,clearInterval(at),at=null,r.pause&&n(r.pause).length>0&&n(r.pause).off("click.booklet"),ar=null,r.play&&n(r.play).length>0&&n(r.play).off("click.booklet"),vr=null,hf()},hf=function(){u.find(".b-page").draggable()&&u.find(".b-page").draggable("destroy").removeClass("b-grab b-grabbing"),u.off(".booklet")},cf=function(n,t){if(n=="start")n=0;else if(n=="end")n=ft;else if(typeof n=="number"){if(n<0||n>ft)return}else if(typeof n=="undefined")return;if(typeof t!="undefined"&&t!=""){if(dr(),or(),r.closed&&r.covers&&n==ft?u.children(":eq("+(n-1)+")").before(t):r.closed&&r.covers&&n==0?u.children(":eq("+n+")").after(t):n==ft?u.children(":eq("+(n-1)+")").after(t):u.children(":eq("+n+")").before(t),ft=u.children().length,ut={options:jQuery.extend({},r),index:n,page:u.children(":eq("+n+")")[0]},r.add)u.off(y.add+".booklet").on(y.add+".booklet",r.add);u.trigger(y.add,ut),ct=!1,kr(),rr(),ir(),bi(),ki()}},lf=function(n){if(n=="start")n=0;else if(n=="end")n=ft;else if(typeof n=="number"){if(n<0||n>ft)return}else if(typeof n=="undefined")return;if(u.children(".b-page").length!=2||!(u.find(".b-page-blank").length>0)){dr(),or(),n>=r.currentIndex&&(n>0&&n%2!=0&&(r.currentIndex-=2),r.currentIndex<0&&(r.currentIndex=0));var t;if(t=r.closed&&r.covers&&n==ft?u.children(":eq("+(n-1)+")").remove():r.closed&&r.covers&&n==0?u.children(":eq("+n+")").remove():n==ft?u.children(":eq("+(n-1)+")").remove():u.children(":eq("+n+")").remove(),ft=u.children().length,ut={options:jQuery.extend({},r),index:n,page:t[0]},r.remove)u.off(y.remove+".booklet").on(y.remove+".booklet",r.remove);u.trigger(y.remove,ut),t=null,ct=!1,kr(),ir(),rr(),bi(),ki()}},ei=function(){it||(dt&&r.currentIndex+2>=r.pageTotal?kt(0):kt(r.currentIndex+2))},oi=function(){it||(dt&&r.currentIndex-2<0?kt(r.pageTotal-2):kt(r.currentIndex-2))},kt=function(n){var t;if(n>r.currentIndex&&n<r.pageTotal&&n>=0&&!it){if(it=!0,ur=n-r.currentIndex,r.currentIndex=n,r.movingForward=!0,ut={options:jQuery.extend({},r),index:n,pages:[o[n].contentNode,o[n+1].contentNode]},r.start)u.off(y.start+".booklet").on(y.start+".booklet",r.start);u.trigger(y.start,ut),ki(),n==r.pageTotal-2&&bi(),eu(r.currentIndex+1,r),t=rt===!0?r.speed*(c.width()/e):fu,wu(ur,!0,et,t),r.closed&&r.autoCenter&&n-ur==0?(p.stop().animate(f.p2closed,rt===!0?t:t*2,r.easing),k.stop().animate(f.p4closed,rt===!0?t:t*2,r.easing)):p.stop().animate(f.p2,t,rt===!0?r.easeOut:r.easeIn),rt?(c.animate(f.p3out,t,r.easeOut),ai.animate(f.p3wrapOut,t,r.easeOut,function(){gr()})):(c.stop().animate(f.p3in,t,r.easeIn).animate(f.p3out,t,r.easeOut),ai.animate(f.p3wrapIn,t,r.easeIn).animate(f.p3wrapOut,t,r.easeOut,function(){gr()}))}else if(n<r.currentIndex&&n<r.pageTotal&&n>=0&&!it){if(it=!0,ur=r.currentIndex-n,r.currentIndex=n,r.movingForward=!1,ut={options:jQuery.extend({},r),index:n,pages:[o[n].contentNode,o[n+1].contentNode]},r.start)u.off(y.start+".booklet").on(y.start+".booklet",r.start);u.trigger(y.start,ut),ki(),n==0&&bi(),eu(r.currentIndex+1,r),t=yt===!0?r.speed*(a.width()/e):fu,wu(ur,!1,ti,t),yt?(ni.animate(f.p1,t,r.easeOut),gi.animate(f.p1wrap,t,r.easeOut),r.closed&&r.autoCenter&&r.currentIndex==0?(a.animate(f.p0outClosed,t,r.easeOut),p.stop().animate(f.p2back,t,r.easeOut)):a.animate(f.p0,t,r.easeOut),ht.animate(f.p0wrapDrag,t,r.easeOut,function(){gr()})):(ni.animate(f.p1,t*2,r.easing),gi.animate(f.p1wrap,t*2,r.easing),r.closed&&r.autoCenter&&r.currentIndex==0?(a.animate(f.p0in,t,r.easeIn).animate(f.p0outClosed,t,r.easeOut),p.stop().animate(f.p2back,t*2,r.easing)):a.animate(f.p0in,t,r.easeIn).animate(f.p0out,t,r.easeOut),ht.animate(f.p0wrapIn,t,r.easeIn).animate(f.p0wrapOut,t,r.easeOut,function(){gr()}))}},sr=function(t){(r.hovers&&r.overlays||r.manual)&&(t?it||hi||ci||rt||!(r.currentIndex+2<=r.pageTotal-2)||(p.stop().animate(f.hover.p2,f.hover.speed,r.easing),c.addClass("b-grab"),r.closed&&r.autoCenter&&r.currentIndex==0?c.stop().animate(f.hover.p3closed,f.hover.speed,r.easing):c.stop().animate(f.hover.p3,f.hover.speed,r.easing),ai.stop().animate(f.hover.p3wrap,f.hover.speed,r.easing),r.shadows&&!n.support.opacity&&et.css({right:"auto",left:"-40%"}),hi=!0):it||ci||hi||yt||!(r.currentIndex-2>=0)||(ni.stop().animate(f.hover.p1,f.hover.speed,r.easing),a.addClass("b-grab"),gi.stop().animate(f.hover.p1wrap,f.hover.speed,r.easing),a.stop().animate(f.hover.p0,f.hover.speed,r.easing),ht.stop().animate(f.hover.p0wrap,f.hover.speed,r.easing),r.shadows&&!n.support.opacity&&ti.css({left:-.38*e}),ci=!0))},si=function(t){(r.hovers&&r.overlays||r.manual)&&(t?!it&&hi&&!rt&&r.currentIndex+2<=r.pageTotal-2&&(r.closed&&r.autoCenter&&r.currentIndex==0?(p.stop().animate(f.hover.p2closedEnd,f.hover.speed,r.easing),c.stop().animate(f.hover.p3closedEnd,f.hover.speed,r.easing)):(p.stop().animate(f.hover.p2end,f.hover.speed,r.easing),c.stop().animate(f.hover.p3end,f.hover.speed,r.easing)),ai.stop().animate(f.hover.p3wrapEnd,f.hover.speed,r.easing),r.shadows&&!n.support.opacity&&et.css({left:"auto"}),hi=!1):!it&&ci&&!yt&&r.currentIndex-2>=0&&(ni.stop().animate(f.hover.p1end,f.hover.speed,r.easing),gi.stop().animate(f.hover.p1wrapEnd,f.hover.speed,r.easing),a.stop().animate(f.hover.p0end,f.hover.speed,r.easing),ht.stop().animate(f.hover.p0wrapEnd,f.hover.speed,r.easing),ci=!1))},wu=function(t,i,f,o){i&&t>2?(u.find(".b-p3, .b-p4").removeClass("b-p3 b-p4").hide(),u.find(".b-page-"+r.currentIndex).addClass("b-p3").show().stop().css(h.p3),u.find(".b-page-"+(r.currentIndex+1)).addClass("b-p4").show().css(h.p4),u.find(".b-page-"+r.currentIndex+" .b-wrap").show().css(h.wrap),u.find(".b-page-"+(r.currentIndex+1)+" .b-wrap").show().css(h.wrap),c=u.find(".b-p3"),k=u.find(".b-p4"),ai=u.find(".b-p3 .b-wrap"),su=u.find(".b-p4 .b-wrap"),r.closed&&r.autoCenter&&r.currentIndex-t==0&&(c.css({left:e}),k.css({left:0})),hi&&c.css({left:r.width-40,width:20,"padding-left":10}),r.shadows&&(u.find(".b-shadow-f").remove(),et=n(gt.sF).css(h.sF).appendTo(c),f=et)):!i&&t>2&&(u.find(".b-pN, .b-p0").removeClass("b-pN b-p0").hide(),u.find(".b-page-"+r.currentIndex).addClass("b-pN").show().css(h.pN),u.find(".b-page-"+(r.currentIndex+1)).addClass("b-p0").show().css(h.p0),u.find(".b-page-"+r.currentIndex+" .b-wrap").show().css(h.wrap),u.find(".b-page-"+(r.currentIndex+1)+" .b-wrap").show().css(h.wrap),vt=u.find(".b-pN"),a=u.find(".b-p0"),ou=u.find(".b-pN .b-wrap"),ht=u.find(".b-p0 .b-wrap"),r.closed&&r.autoCenter&&vt.css({left:0}),ht.css(h.p0wrap),ci&&(a.css({left:10,width:40}),ht.css({right:10})),r.shadows&&(u.find(".b-shadow-b, .b-shadow-f").remove(),ti=n(gt.sB).appendTo(a).css(h.sB),f=ti)),r.closed&&(i||r.currentIndex!=0?i||vt.show():vt.hide(),i&&r.currentIndex>=r.pageTotal-2?k.hide():i&&k.show()),r.shadows&&(n.support.opacity?(rt||yt||f.animate({opacity:1},o,r.easeIn),f.animate({opacity:0},o,r.easeOut)):i?f.animate({right:r.shadowTopFwdWidth},o*2,r.easeIn):f.animate({left:r.shadowTopBackWidth},o*2,r.easeIn)),r.closed&&r.autoCenter&&(r.currentIndex==0?(c.hide(),k.hide(),u.animate({width:e},!rt&&!yt?o*2:o,r.easing)):r.currentIndex>=r.pageTotal-2?(a.hide(),vt.hide(),u.animate({width:e},o*2,r.easing)):u.animate({width:r.width},o*2,r.easing))},gr=function(){if(ir(),ki(),bi(),it=!1,ut={options:jQuery.extend({},r),index:r.currentIndex,pages:[o[r.currentIndex].contentNode,o[r.currentIndex+1].contentNode]},r.change)u.off(y.change+".booklet").on(y.change+".booklet",r.change);u.trigger(y.change,ut)};return{init:nf,enable:tf,disable:rf,destroy:uf,next:ei,prev:oi,gotopage:function(n){if(typeof n=="string")n=="start"?n=0:n=="end"?n=r.pageTotal-2:this.gotopage(parseInt(n));else if(typeof n=="number"){if(n<0||n>=r.pageTotal)return}else if(typeof n=="undefined")return;n%2!=0&&(n-=1),r.direction==v.rightToLeft&&(n=Math.abs(n-r.pageTotal)-2),kt(n)},add:cf,remove:lf,option:function(t,i){if(typeof t=="string")if(r[t])if(typeof i!="undefined")r[t]=i,rr();else return r[t];else n.error('Option "'+t+'" does not exist on jQuery.booklet.');else if(typeof t=="object")rr(t);else if(typeof t=="undefined"||!t)return jQuery.extend({},r)}}}n.fn.booklet=function(i,r,u){var f,e,s,h,o,c,l;return typeof i=="string"?(o=[],n(this).each(function(){f=n(this).data("booklet"),f?(e=i,s=[],r&&s.push(r),u&&s.push(u),f[e]?(h=f[e].apply(f,s),(typeof h!="undefined"||h)&&o.push(f[e].apply(f,s))):n.error('Method "'+e+'" does not exist on jQuery.booklet.')):n.error('jQuery.booklet has not been initialized. Method "'+i+'" cannot be called.')}),o.length==1?o[0]:o.length>0?o:n(this)):typeof i=="number"?n(this).each(function(){f=n(this).data("booklet"),f?(l=i,f.gotopage(l)):n.error("jQuery.booklet has not been initialized.")}):typeof e=="object"||!e?n(this).each(function(){return c=n.extend({},n.fn.booklet.defaults,i),f=n(this).data("booklet"),f&&f.destroy(),f=new t(n(this),c),f.init(),this}):void 0},n.fn.booklet.defaults={name:null,width:960,height:600,speed:1e3,direction:"LTR",startingPage:0,easing:"easeInOutQuad",easeIn:"easeInQuad",easeOut:"easeOutQuad",closed:!1,closedFrontTitle:"Beginning",closedFrontChapter:"Beginning of Book",closedBackTitle:"End",closedBackChapter:"End of Book",covers:!1,autoCenter:!1,pagePadding:10,pageNumbers:!0,pageBorder:0,manual:!0,hovers:!0,hoverWidth:50,hoverSpeed:500,hoverThreshold:.25,hoverClick:!0,overlays:!1,tabs:!1,tabWidth:60,tabHeight:20,nextControlText:"Next",previousControlText:"Previous",nextControlTitle:"Next Page",previousControlTitle:"Previous Page",arrows:!1,arrowsHide:!1,cursor:"pointer",hash:!1,hashTitleText:" - Page ",keyboard:!0,next:null,prev:null,auto:!1,delay:5e3,pause:null,play:null,menu:null,pageSelector:!1,chapterSelector:!1,shadows:!0,shadowTopFwdWidth:166,shadowTopBackWidth:166,shadowBtmWidth:50,create:null,start:null,change:null,add:null,remove:null}})(jQuery);
//@ sourceMappingURL=jquery.booklet.latest.min.js.map